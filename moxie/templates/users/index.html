{% extends 'base.html' %}
{% load i18n %}
{% load crispy_forms_filters %}
{% block content %}

<script type="text/javascript">
$(document).ready(function() {
	$("#myaccountform").submit(function(e){
		const error_message = "{% trans 'Error: Passwords do not match' %}";
		if ($("#password").val() === $("#password_check").val()) {
			$("#myaccountform").submit();
		}
		else {
			alert(error_message);
			return false;
		}
	});
});
</script>

<div class="mt-3 container">
    <button data-target="#my_account" class="toggable btn btn-primary"><i class="fa fa-user-circle-o"></i> {% trans 'My account' %}</button>
    <button data-target="#categories_table" class="toggable btn btn-info"><i class="fa fa-clipboard"></i> {% trans 'Categories' %}</button>
    <button data-target="#favourites_table" class="toggable btn btn-info"><i class="fa fa-star"></i> {% trans 'Favourites' %}</button>
    <button data-target="#budget_table" class="toggable btn btn-info"><i class="fa fa-calculator"></i> {% trans 'Budget' %}</button>
    <button data-target="#tags_table" class="toggable btn btn-info"><i class="fa fa-tag"></i> {% trans 'Tags' %}</button>
</div>

<div id="my_account" class="accordion-body form-group mt-3">
    <div class="container">
        <div class="h2">{% trans 'Update your profile' %}</div>
    </div>
    <div class="container">
        {% crispy my_account_form %}
    </div>
    <div class="container mt-5">
        <div class="h2">{% trans 'Change your password' %}</div>
    </div>
    <div class="container">
        <form action="{% url 'password-change' %}" method="POST">
            {% csrf_token %}
            {{ change_password_form|crispy }}
            <div class="text-right">
            <input type="submit" value="{% trans 'Save' %}" class="btn btn-primary">
            </div>
        </form>
    </div>
</div>

{% include 'categories/categories.html' %}

{% include 'categories/favourites.html' %}

{% include 'categories/budget.html' %}

{% include 'tags/tags.html' %}

    <div class="container">
        <div id="donate" class="mt-3 mb-3 pb-5">
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
                <input type="hidden" name="cmd" value="_s-xclick">
                <input type="hidden" name="hosted_button_id" value="RVPQ896TDVARA">
                <input style="height: auto;" type="image" src="https://www.paypalobjects.com/es_ES/ES/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal. La forma rÃ¡pida y segura de pagar en Internet.">
                <img alt="" src="https://www.paypalobjects.com/es_ES/i/scr/pixel.gif" width="1" height="1">
            </form>
        </div>
    </div>

{% endblock %}